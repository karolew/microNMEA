# NMEA Micropython Parser

It is lightweight micropython oriented implementation of NMEA-0183 V4.1 protocol. 

The following documents were used as a source of NMEA information:
* https://help.fieldsystems.trimble.com/sps/nmea0183-messages-vtg.htm
* https://navspark.mybigcommerce.com/content/PX1122R_DS.pdf
* https://aprs.gids.nl/nmea/#latlong

This library provides NMEA decoder (`MicroNMEA` class) and a 
tool for working with numbers with increased precision (by 
default 10 decimal places) which makes it possible to process 
RTK precision data (`Precise` class).

# Usage

* Copy the `MicroNMEA.py` to your project.
* Instantiate microNMEA class.
* Call `parse` method with full NMEA sentence as argument.
* Processed data available via class attributes.
 
Example:
```python 
nmea = MicroNMEA()
nmea.parse("$GNGSA,A,3,67,68,69,84,,,,,,,,,1.2,0.7,1.0,2*3B")
```
## Parameters

* unit: 
  * 1 - raw data (default). E.g. speed knots, date ddmmyy, time  hhmmss.sssssss.
  * 2 - ISO 8601 standards. E.g. speed km/h, distance meters, date yyyy-mm-dd, time hh:mm:ss.
* formats:
  * 1 - raw formats of coordinates. E.g. Latitude dddmm.mmmmmmm, Longitude dddmm.mmmmmmm.
  * 2 - Decimal Degrees formats of coordinates (default). E.g. Latitude (-90 to 90) and longitude (-180 to 180).
* crc:
  * True - calculate checksum for each sentence (default).
  * False - skip checksum calculation.

# Available GNSS attributes

| Attribute                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `date`                      | UTC data                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `time`                      | UTC time                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `lat`                       | Latitude                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `lat_ns`                    | Latitude hemisphere indicator                                                                                                                                                                                                                                                                                                                                                                                                      |
| `lon`                       | Longitude                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `lon_ew`                    | Longitude hemisphere indicator                                                                                                                                                                                                                                                                                                                                                                                                     |
| `alt`                       | Mean sea level (geoid), (-9999.999 ~ 17999.999)                                                                                                                                                                                                                                                                                                                                                                                    |
| `quality`                   | GPS quality indicator:<br/>0 = position fix unavailable <br/>1 = valid position fix, SPS mode  <br/>2 = valid position fix, differential GPS mode <br/>3 = GPS PPS Mode, fix valid <br/>4 = Real Time Kinematic. System used in RTK mode with fixed integers <br/>5 = Float RTK. Satellite system used in RTK mode., floating integers <br/>6 = Estimated (dead reckoning) Mode <br/>7 = Manual Input Mode <br/>8 = Simulator Mode |
| `mode`                      | Mode indicator: <br/> A = Autonomous mode <br/> D = Differential mode <br/> E = Estimated (dead reckoning) mode <br/> F = Float RTK. Satellite system used in RTK mode, floating integers <br/> M = Manual input mode <br/> N = Data not valid <br/> P = Precise <br/> R = Real Time Kinematic. System used in RTK mode with fixed integers <br/> S = Simulator mode<br/>                                                          |
| `number_of_satellites_used` | Number of satellites in use                                                                                                                                                                                                                                                                                                                                                                                                        |
| `satellites_used`           | Used satellites IDs differentiated by the GNSS systems. E.g. <br/>{'BDS': ['06', '11', '16', '21', '22', '', '', '', '', '', '', ''], <br/>'GPS': ['01', '02', '03', '04', '17', '19', '32', '', '', '', '', ''], <br/>'GLONASS': ['67', '68', '69', '84', '', '', '', '', '', '', '', ''], <br/>'GALILEO': ['05', '13', '15', '', '', '', '', '', '', '', '', '']}                                                                |
| `hdop`                      | Horizontal dilution of precision (0.0 to 99.9)                                                                                                                                                                                                                                                                                                                                                                                     |
| `vdop`                      | Vertical dilution of precision (0.0 to 99.9)                                                                                                                                                                                                                                                                                                                                                                                       |
| `pdop`                      | Position dilution of precision (0.0 to 99.9)                                                                                                                                                                                                                                                                                                                                                                                       |
| `dgps_station_id`           | Differential reference station ID, 0000 ~ 1023                                                                                                                                                                                                                                                                                                                                                                                     |
| `dgps_age`                  | Age of Differential GPS data. NULL when DGPS not used                                                                                                                                                                                                                                                                                                                                                                              |
| `geoidal_separation`        | Geoidal separation in meters                                                                                                                                                                                                                                                                                                                                                                                                       |
| `gsv_data`                  | Number of satellites (SV) in view, satellite ID numbers, elevation, azimuth, and SNR value. E.g. <br/>{'GP': {'satellites_in_view': 10, 'satellites': <br/>{1: [81, 167, 33], <br/>2: [73, 168, 18], <br/>3: [63, 271, 30], <br/>21: [52, 147, 'NA'], <br/>17: [37, 296, 49], <br/>32: [29, 51, 33], <br/>28: [27, 92, 34], <br/>4: [20, 202, 32], <br/>31: [18, 118, 9], <br/>19: [17, 322, 41]}}}                                |
| `speed`                     | Speed over ground                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `cource`                    | Course over ground in degrees (000.0 ~ 359.9)                                                                                                                                                                                                                                                                                                                                                                                      |
| `heading`                   | Actual vessel heading in degrees                                                                                                                                                                                                                                                                                                                                                                                                   |
| `east_velocity`             | ‘East’ component of ENU velocity (m/s)                                                                                                                                                                                                                                                                                                                                                                                             |
| `north_velocity`            | ‘North’ component of ENU velocity (m/s)                                                                                                                                                                                                                                                                                                                                                                                            |
| `up_velocity`               | ‘Up’ component of ENU velocity (m/s)                                                                                                                                                                                                                                                                                                                                                                                               |
| `rtk_age`                   | Age of differential                                                                                                                                                                                                                                                                                                                                                                                                                |
| `rtk_ratio`                 | AR ratio factor for validation                                                                                                                                                                                                                                                                                                                                                                                                     |
| `east_pob`                  | East-projection of baseline, meters                                                                                                                                                                                                                                                                                                                                                                                                |
| `north_pob`                 | North-projection of baseline, meters                                                                                                                                                                                                                                                                                                                                                                                               |
| `up_pob`                    | Up-projection of baseline, meters                                                                                                                                                                                                                                                                                                                                                                                                  |
| `baseline_length`           | Baseline length, meters                                                                                                                                                                                                                                                                                                                                                                                                            |
| `baseline_course`           | Baseline course (angle between baseline vector and north direction), degrees                                                                                                                                                                                                                                                                                                                                                       |